import React, { useState } from "react";
import { uploadFiles } from "../services/apiServices"; // Impor function uploadFiles
import { useNavigate } from "react-router-dom";

const Home: React.FC = () => {
  const [dosen_file, setDosenFile] = useState<File | null>(null);
  const [jadwal_file, setScheduleFile] = useState<File | null>(null);
  const [dosen_file_name, setDosenFileName] = useState<string | null>(null);
  const [scheduleFileName, setScheduleFileName] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null); // Tambahkan state untuk error
  const [isLoading, setIsLoading] = useState(false);
  const [isSuccess, setIsSuccess] = useState(false);
  const navigate = useNavigate();

  const handleDosenFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (file) {
      setDosenFile(file);
      setDosenFileName(file.name);
    }
  };

  const handleScheduleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (file) {
      setScheduleFile(file);
      setScheduleFileName(file.name);
    }
  };

  const handleSubmit = async () => {
    if (dosen_file && jadwal_file) {
      const validFileTypes = ["application/vnd.ms-excel", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];

      // Validasi tipe file dosen
      if (!validFileTypes.includes(dosen_file.type)) {
        setError("Invalid file type for dosen file. Please upload a valid Excel file.");
        return;
      }

      // Validasi tipe file schedule
      if (!validFileTypes.includes(jadwal_file.type)) {
        setError("Invalid file type for schedule file. Please upload a valid Excel file.");
        return;
      }

      // Validasi ukuran file (maksimal 5MB)
      const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB
      if (dosen_file.size > MAX_FILE_SIZE) {
        setError("Dosen file size exceeds the 5MB limit. Please upload a smaller file.");
        return;
      }
      if (jadwal_file.size > MAX_FILE_SIZE) {
        setError("Schedule file size exceeds the 5MB limit. Please upload a smaller file.");
        return;
      }

      setIsLoading(true);
      setIsSuccess(false);

      // Kirim file ke server
      try {
        const uploadedData = await uploadFiles(dosen_file, jadwal_file);
        console.log("Upload successful:", uploadedData);
        setIsSuccess(true);
        setError(null);

        navigate("/overview", { state: { scheduleData: uploadedData } });
      } catch (uploadError: unknown) {
        const errorMessage = (uploadError as Error).message || "An unexpected error occurred. Please try again.";
        setError(errorMessage);
      } finally {
        setIsLoading(false); // Sembunyikan overlay loading
      }
    } else {
      setError("Please upload both dosen and schedule files.");
    }
  };

  return (
    <div className="bg-gray-50 min-h-[80vh] flex flex-col justify-center items-center">
      <main className="flex w-full space-x-6 justify-center mb-12">
        {/* Bagian kiri untuk file dosen */}
        <div className="flex-1 p-4 border-r-2 border-gray-300 max-w-md">
          <h2 className="text-2xl font-semibold text-gray-800">Upload Dosen File</h2>
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="170" height="170" viewBox="0 0 483 453" fill="none">
              <ellipse cx="157.5" cy="136.5" rx="97.5" ry="86.5" fill="#D9D9D9" />
              <path d="M422 136.5C422 182.288 380.039 220 327.5 220C274.961 220 233 182.288 233 136.5C233 90.7117 274.961 53 327.5 53C380.039 53 422 90.7117 422 136.5Z" fill="#D9D9D9" stroke="black" strokeWidth="6" />
              <path
                d="M79.0456 90.1944C80.2575 89.0647 80.3242 87.1664 79.1944 85.9544C78.0647 84.7425 76.1664 84.6758 74.9544 85.8056L79.0456 90.1944ZM66.3363 165.252C64.1454 156.742 62.1561 142.642 63.3675 128.253C64.5831 113.814 68.9744 99.5826 79.0456 90.1944L74.9544 85.8056C63.3153 96.6552 58.6607 112.64 57.3886 127.75C56.1124 142.909 58.1937 157.69 60.5258 166.748L66.3363 165.252Z"
                fill="black"
              />
              <path d="M352.5 425.731H132C132 413.231 132 329.231 242 323.231C330 318.431 352.333 389.565 352.5 425.731Z" fill="#007AFF" />
              <path
                d="M236.27 376.917L212.878 343.098C209.68 338.475 212.962 332.158 218.583 332.116L264.865 331.774C270.486 331.732 273.861 338 270.732 342.67L247.843 376.832C245.095 380.933 239.079 380.977 236.27 376.917Z"
                fill="#D9D9D9"
                stroke="black"
                strokeWidth="6"
              />
              <path
                d="M100 189.5C100 198.196 97.4704 205.943 93.5318 211.441C89.5895 216.944 84.4111 220 79 220C73.5889 220 68.4105 216.944 64.4682 211.441C60.5296 205.943 58 198.196 58 189.5C58 180.804 60.5296 173.057 64.4682 167.559C68.4105 162.056 73.5889 159 79 159C84.4111 159 89.5895 162.056 93.5318 167.559C97.4704 173.057 100 180.804 100 189.5Z"
                fill="#FFDDCC"
                stroke="black"
                strokeWidth="6"
              />
              <path
                d="M422 189.5C422 198.196 419.47 205.943 415.532 211.441C411.589 216.944 406.411 220 401 220C395.589 220 390.411 216.944 386.468 211.441C382.53 205.943 380 198.196 380 189.5C380 180.804 382.53 173.057 386.468 167.559C390.411 162.056 395.589 159 401 159C406.411 159 411.589 162.056 415.532 167.559C419.47 173.057 422 180.804 422 189.5Z"
                fill="#FFDDCC"
                stroke="black"
                strokeWidth="6"
              />
              <circle cx="242" cy="182" r="149" fill="#FFDDCC" stroke="black" strokeWidth="6" />
              <ellipse cx="158" cy="205" rx="30" ry="23" fill="#FAA3AB" />
              <ellipse cx="328" cy="205" rx="30" ry="23" fill="#FAA3AB" />
              <path d="M166 238.09C206.8 262.89 235 244.424 244 232.09C272.4 265.69 304.833 246.09 317.5 232.09C299.5 172.89 261 179.423 244 190.09C197.2 162.89 172.5 210.757 166 238.09Z" fill="#BDBAC1" stroke="black" strokeWidth="6" />
              <ellipse cx="311" cy="172" rx="7" ry="10" fill="black" />
              <ellipse cx="173" cy="172" rx="7" ry="10" fill="black" />
              <path d="M307 333C305 281 267.166 311.333 248.5 333H233.5C214.833 313.833 177.2 287 176 333C174.8 379 213.833 358.833 233.5 343H248.5C268.833 361.333 309 385 307 333Z" fill="#F24C5B" stroke="black" strokeWidth="6" />
              <path
                d="M260 334C260 337.283 258.261 340.467 255.031 342.927C251.799 345.39 247.201 347 242 347C236.799 347 232.201 345.39 228.969 342.927C225.739 340.467 224 337.283 224 334C224 330.717 225.739 327.533 228.969 325.073C232.201 322.61 236.799 321 242 321C247.201 321 251.799 322.61 255.031 325.073C258.261 327.533 260 330.717 260 334Z"
                fill="#F24C5B"
                stroke="black"
                strokeWidth="6"
              />
              <path
                d="M130.5 426L127.572 426.654L128.096 429H130.5V426ZM166 426V429H168.273L168.888 426.812L166 426ZM175 394H178L172.112 393.188L175 394ZM175 426H172V429H175V426ZM302.5 426V429H304.842L305.41 426.728L302.5 426ZM310.5 394H313.5L307.59 393.272L310.5 394ZM310.5 426H307.5V429H310.5V426ZM355.5 426V429H358.66L358.496 425.844L355.5 426ZM347.882 382.633C346.299 382.145 344.62 383.034 344.133 384.618C343.645 386.201 344.534 387.88 346.118 388.367L347.882 382.633ZM173.316 334.018C163.696 340.545 149.961 352.903 139.768 368.941C129.567 384.992 122.741 405.018 127.572 426.654L133.428 425.346C129.059 405.782 135.15 387.392 144.832 372.159C154.522 356.913 167.638 345.121 176.685 338.982L173.316 334.018ZM130.5 429H166V423H130.5V429ZM168.888 426.812L177.888 394.812L172.112 393.188L163.112 425.188L168.888 426.812ZM172 394V426H178V394H172ZM175 429H302.5V423H175V429ZM305.41 426.728L313.41 394.728L307.59 393.272L299.59 425.272L305.41 426.728ZM307.5 394V426H313.5V394H307.5ZM310.5 429H355.5V423H310.5V429ZM358.496 425.844C358.159 419.359 357.326 409.513 355.909 401.043C355.203 396.824 354.333 392.824 353.265 389.721C352.733 388.178 352.109 386.729 351.357 385.555C350.653 384.456 349.551 383.146 347.882 382.633L346.118 388.367C345.749 388.254 345.867 388.108 346.305 388.792C346.695 389.4 347.135 390.35 347.592 391.676C348.5 394.312 349.305 397.931 349.991 402.032C351.358 410.204 352.174 419.807 352.504 426.156L358.496 425.844Z"
                fill="black"
              />
              <path
                d="M330.225 360.956C331.305 362.212 333.199 362.355 334.456 361.275C335.712 360.195 335.855 358.301 334.775 357.044L330.225 360.956ZM305.725 332.456L330.225 360.956L334.775 357.044L310.275 328.544L305.725 332.456Z"
                fill="black"
              />
              <path d="M95 67.9999C105.167 59.3332 134 43.7999 168 50.9999" stroke="black" strokeWidth="6" strokeLinecap="round" />
            </svg>
          </div>
          <input type="file" accept=".xlsx, .xls" onChange={handleDosenFileChange} className="mt-4" id="dosen-file-upload" />
          <label htmlFor="dosen-file-upload" className="bg-blue-600 text-white px-6 py-3 rounded shadow-lg hover:bg-blue-700 cursor-pointer block mt-4">
            Select Dosen File
          </label>
          {dosen_file_name && <p className="mt-2 text-gray-600">Selected file: {dosen_file_name}</p>}
        </div>

        {/* Bagian kanan untuk file schedule */}
        <div className="flex-1 p-4 max-w-md">
          <h2 className="text-2xl font-semibold text-gray-800">Upload Schedule File</h2>
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="180" height="170" viewBox="0 0 487 460" fill="none">
              <rect x="44" y="98" width="411" height="322" rx="35" fill="#F0EDEE" />
              <path d="M79 101H420C437.673 101 452 115.327 452 133V182H47V133C47 115.327 61.3269 101 79 101Z" fill="#007AFF" stroke="black" strokeWidth="6" />
              <rect x="309" y="48" width="45" height="116" rx="15" fill="#D1D3D4" stroke="black" strokeWidth="6" />
              <rect x="145" y="48" width="45" height="116" rx="15" fill="#D1D3D4" stroke="black" strokeWidth="6" />
              <mask id="path-5-outside-1_200_1007" maskUnits="userSpaceOnUse" x="202" y="247" width="94" height="144" fill="black">
                <rect fill="white" x="202" y="247" width="94" height="144" />
                <path d="M262.73 274.54C261.33 301.98 260.63 323.82 260.63 340.06C260.63 348.46 260.84 356.44 261.26 364C262.38 364.84 264.55 365.26 267.77 365.26L272.6 365.05C274.56 364.77 276.38 364.63 278.06 364.63C281.7 364.63 284.5 365.26 286.46 366.52C288.56 367.78 289.61 370.23 289.61 373.87C289.61 377.37 288.56 380.1 286.46 382.06C284.5 384.02 280.37 385 274.07 385C268.75 385 262.31 384.58 254.75 383.74C252.93 383.6 251.18 383.46 249.5 383.32C247.82 383.18 246.28 383.11 244.88 383.11C237.18 383.25 231.44 383.53 227.66 383.95C223.88 384.37 219.61 384.58 214.85 384.58C210.51 384.58 208.34 381.29 208.34 374.71C208.34 368.41 212.4 365.26 220.52 365.26C221.78 365.26 223.81 365.4 226.61 365.68C228.99 366.1 231.51 366.31 234.17 366.31C235.71 366.31 236.97 366.24 237.95 366.1C238.09 356.72 238.58 343.07 239.42 325.15C240.26 304.15 240.68 288.61 240.68 278.53C239.98 278.67 237.53 279.65 233.33 281.47C226.89 284.69 222.13 286.3 219.05 286.3C217.37 286.3 215.83 285.46 214.43 283.78C213.03 281.96 212.33 279.86 212.33 277.48C212.33 275.1 213.8 272.79 216.74 270.55C219.68 268.31 224.44 265.37 231.02 261.73C234.66 259.91 238.16 257.88 241.52 255.64C242.36 255.08 243.55 254.52 245.09 253.96C246.77 253.4 248.03 253.12 248.87 253.12C252.51 253.12 255.8 253.89 258.74 255.43C261.82 256.83 263.36 258.72 263.36 261.1L262.73 274.54Z" />
              </mask>
              <path
                d="M262.73 274.54C261.33 301.98 260.63 323.82 260.63 340.06C260.63 348.46 260.84 356.44 261.26 364C262.38 364.84 264.55 365.26 267.77 365.26L272.6 365.05C274.56 364.77 276.38 364.63 278.06 364.63C281.7 364.63 284.5 365.26 286.46 366.52C288.56 367.78 289.61 370.23 289.61 373.87C289.61 377.37 288.56 380.1 286.46 382.06C284.5 384.02 280.37 385 274.07 385C268.75 385 262.31 384.58 254.75 383.74C252.93 383.6 251.18 383.46 249.5 383.32C247.82 383.18 246.28 383.11 244.88 383.11C237.18 383.25 231.44 383.53 227.66 383.95C223.88 384.37 219.61 384.58 214.85 384.58C210.51 384.58 208.34 381.29 208.34 374.71C208.34 368.41 212.4 365.26 220.52 365.26C221.78 365.26 223.81 365.4 226.61 365.68C228.99 366.1 231.51 366.31 234.17 366.31C235.71 366.31 236.97 366.24 237.95 366.1C238.09 356.72 238.58 343.07 239.42 325.15C240.26 304.15 240.68 288.61 240.68 278.53C239.98 278.67 237.53 279.65 233.33 281.47C226.89 284.69 222.13 286.3 219.05 286.3C217.37 286.3 215.83 285.46 214.43 283.78C213.03 281.96 212.33 279.86 212.33 277.48C212.33 275.1 213.8 272.79 216.74 270.55C219.68 268.31 224.44 265.37 231.02 261.73C234.66 259.91 238.16 257.88 241.52 255.64C242.36 255.08 243.55 254.52 245.09 253.96C246.77 253.4 248.03 253.12 248.87 253.12C252.51 253.12 255.8 253.89 258.74 255.43C261.82 256.83 263.36 258.72 263.36 261.1L262.73 274.54Z"
                fill="#4D5658"
              />
              <path
                d="M262.73 274.54L268.722 274.846L268.723 274.833L268.723 274.821L262.73 274.54ZM261.26 364L255.269 364.333L255.424 367.123L257.66 368.8L261.26 364ZM267.77 365.26V371.26H267.9L268.031 371.254L267.77 365.26ZM272.6 365.05L272.861 371.044L273.156 371.031L273.449 370.99L272.6 365.05ZM286.46 366.52L283.215 371.567L283.293 371.617L283.373 371.665L286.46 366.52ZM286.46 382.06L282.366 377.674L282.29 377.744L282.217 377.817L286.46 382.06ZM254.75 383.74L255.413 377.777L255.312 377.765L255.21 377.758L254.75 383.74ZM249.5 383.32L249.002 389.299L249.002 389.299L249.5 383.32ZM244.88 383.11V377.11H244.825L244.771 377.111L244.88 383.11ZM227.66 383.95L228.323 389.913L228.323 389.913L227.66 383.95ZM226.61 365.68L227.653 359.771L227.431 359.732L227.207 359.71L226.61 365.68ZM237.95 366.1L238.799 372.04L243.873 371.315L243.949 366.19L237.95 366.1ZM239.42 325.15L245.413 325.431L245.414 325.41L245.415 325.39L239.42 325.15ZM240.68 278.53H246.68V271.211L239.503 272.647L240.68 278.53ZM233.33 281.47L230.944 275.965L230.794 276.03L230.647 276.103L233.33 281.47ZM214.43 283.78L209.674 287.438L209.746 287.531L209.821 287.621L214.43 283.78ZM216.74 270.55L220.376 275.323L220.376 275.323L216.74 270.55ZM231.02 261.73L228.337 256.363L228.225 256.419L228.116 256.48L231.02 261.73ZM241.52 255.64L238.192 250.648L238.192 250.648L241.52 255.64ZM245.09 253.96L243.193 248.268L243.116 248.294L243.04 248.321L245.09 253.96ZM258.74 255.43L255.956 260.745L256.105 260.823L256.257 260.892L258.74 255.43ZM263.36 261.1L269.353 261.381L269.36 261.241V261.1H263.36ZM256.738 274.234C255.336 301.717 254.63 323.672 254.63 340.06H266.63C266.63 323.968 267.324 302.243 268.722 274.846L256.738 274.234ZM254.63 340.06C254.63 348.559 254.842 356.651 255.269 364.333L267.251 363.667C266.838 356.229 266.63 348.361 266.63 340.06H254.63ZM257.66 368.8C259.248 369.991 261.073 370.543 262.587 370.836C264.176 371.143 265.934 371.26 267.77 371.26V359.26C266.386 359.26 265.449 359.167 264.868 359.054C264.212 358.927 264.392 358.849 264.86 359.2L257.66 368.8ZM268.031 371.254L272.861 371.044L272.339 359.056L267.509 359.266L268.031 371.254ZM273.449 370.99C275.176 370.743 276.709 370.63 278.06 370.63V358.63C276.051 358.63 273.944 358.797 271.751 359.11L273.449 370.99ZM278.06 370.63C281.144 370.63 282.625 371.187 283.215 371.567L289.705 361.473C286.375 359.333 282.256 358.63 278.06 358.63V370.63ZM283.373 371.665C283.245 371.588 283.233 371.492 283.308 371.666C283.418 371.925 283.61 372.584 283.61 373.87H295.61C295.61 369.233 294.237 364.189 289.547 361.375L283.373 371.665ZM283.61 373.87C283.61 376.098 282.991 377.09 282.366 377.674L290.554 386.446C294.129 383.11 295.61 378.642 295.61 373.87H283.61ZM282.217 377.817C282.336 377.699 282.021 378.068 280.507 378.427C279.057 378.771 276.955 379 274.07 379V391C277.485 391 280.598 390.739 283.278 390.103C285.894 389.482 288.624 388.381 290.703 386.303L282.217 377.817ZM274.07 379C269.043 379 262.837 378.602 255.413 377.777L254.087 389.703C261.783 390.558 268.457 391 274.07 391V379ZM255.21 377.758C253.402 377.619 251.665 377.48 249.998 377.341L249.002 389.299C250.695 389.44 252.458 389.581 254.29 389.722L255.21 377.758ZM249.998 377.341C248.185 377.19 246.476 377.11 244.88 377.11V389.11C246.084 389.11 247.455 389.17 249.002 389.299L249.998 377.341ZM244.771 377.111C237.033 377.252 231.065 377.535 226.997 377.987L228.323 389.913C231.815 389.525 237.327 389.248 244.989 389.109L244.771 377.111ZM226.997 377.987C223.484 378.377 219.441 378.58 214.85 378.58V390.58C219.779 390.58 224.276 390.363 228.323 389.913L226.997 377.987ZM214.85 378.58C214.528 378.58 214.538 378.522 214.708 378.608C214.902 378.706 214.991 378.831 214.976 378.809C214.935 378.746 214.763 378.449 214.607 377.74C214.452 377.034 214.34 376.044 214.34 374.71H202.34C202.34 378.469 202.925 382.333 204.959 385.416C207.281 388.936 210.905 390.58 214.85 390.58V378.58ZM214.34 374.71C214.34 372.949 214.83 372.544 215.063 372.363C215.585 371.958 217.07 371.26 220.52 371.26V359.26C215.85 359.26 211.245 360.137 207.707 362.882C203.88 365.851 202.34 370.171 202.34 374.71H214.34ZM220.52 371.26C221.457 371.26 223.231 371.372 226.013 371.65L227.207 359.71C224.389 359.428 222.103 359.26 220.52 359.26V371.26ZM225.567 371.589C228.324 372.075 231.195 372.31 234.17 372.31V360.31C231.825 360.31 229.656 360.125 227.653 359.771L225.567 371.589ZM234.17 372.31C235.857 372.31 237.428 372.235 238.799 372.04L237.101 360.16C236.512 360.245 235.563 360.31 234.17 360.31V372.31ZM243.949 366.19C244.088 356.907 244.574 343.333 245.413 325.431L233.427 324.869C232.586 342.807 232.092 356.533 231.951 366.01L243.949 366.19ZM245.415 325.39C246.256 304.376 246.68 288.736 246.68 278.53H234.68C234.68 288.484 234.264 303.924 233.425 324.91L245.415 325.39ZM239.503 272.647C238.498 272.848 237.149 273.375 236.089 273.799C234.787 274.32 233.065 275.046 230.944 275.965L235.716 286.975C237.795 286.074 239.398 285.4 240.546 284.941C241.122 284.71 241.546 284.549 241.837 284.446C242.222 284.309 242.147 284.355 241.857 284.413L239.503 272.647ZM230.647 276.103C224.209 279.322 220.579 280.3 219.05 280.3V292.3C223.681 292.3 229.571 290.058 236.013 286.837L230.647 276.103ZM219.05 280.3C219.136 280.3 219.234 280.312 219.331 280.337C219.426 280.362 219.487 280.391 219.508 280.403C219.543 280.422 219.371 280.336 219.039 279.939L209.821 287.621C211.991 290.226 215.083 292.3 219.05 292.3V280.3ZM219.186 280.122C218.624 279.391 218.33 278.589 218.33 277.48H206.33C206.33 281.131 207.436 284.529 209.674 287.438L219.186 280.122ZM218.33 277.48C218.33 277.595 218.278 277.524 218.494 277.184C218.742 276.794 219.285 276.154 220.376 275.323L213.104 265.777C209.514 268.513 206.33 272.378 206.33 277.48H218.33ZM220.376 275.323C222.953 273.36 227.395 270.592 233.924 266.98L228.116 256.48C221.485 260.148 216.407 263.26 213.104 265.777L220.376 275.323ZM233.703 267.097C237.564 265.166 241.28 263.011 244.848 260.632L238.192 250.648C235.04 252.749 231.756 254.654 228.337 256.363L233.703 267.097ZM244.848 260.632C245.121 260.45 245.809 260.083 247.14 259.599L243.04 248.321C241.291 248.957 239.599 249.71 238.192 250.648L244.848 260.632ZM246.987 259.652C247.698 259.415 248.226 259.269 248.597 259.187C249.001 259.097 249.055 259.12 248.87 259.12V247.12C247 247.12 244.961 247.678 243.193 248.268L246.987 259.652ZM248.87 259.12C251.636 259.12 253.956 259.697 255.956 260.745L261.524 250.115C257.644 248.083 253.384 247.12 248.87 247.12V259.12ZM256.257 260.892C256.742 261.112 257.07 261.309 257.281 261.459C257.49 261.608 257.558 261.693 257.554 261.688C257.543 261.674 257.481 261.591 257.427 261.442C257.373 261.292 257.36 261.165 257.36 261.1H269.36C269.36 255.399 265.396 251.865 261.223 249.968L256.257 260.892ZM257.367 260.819L256.737 274.259L268.723 274.821L269.353 261.381L257.367 260.819Z"
                fill="black"
                mask="url(#path-5-outside-1_200_1007)"
              />
              <ellipse cx="302" cy="315" rx="7" ry="11" fill="#090909" />
              <ellipse cx="197" cy="315" rx="7" ry="11" fill="#090909" />
              <ellipse cx="316" cy="339" rx="20" ry="16" fill="#FF8D9D" />
              <ellipse cx="184" cy="339" rx="20" ry="16" fill="#FF8D9D" />
              <path d="M45.5003 184.5V373.5C43.8337 391.167 51.2003 424.9 94.0003 418.5H405C417.333 418.333 442.6 416.2 445 409" stroke="black" strokeWidth="6" strokeLinecap="round" />
              <path d="M452 185V367.5" stroke="black" strokeWidth="6" strokeLinecap="round" />
            </svg>
          </div>
          <input type="file" accept=".xlsx, .xls" onChange={handleScheduleFileChange} className="mt-4" id="schedule-file-upload" />
          <label htmlFor="schedule-file-upload" className="bg-blue-600 text-white px-6 py-3 rounded shadow-lg hover:bg-blue-700 cursor-pointer block mt-4">
            Select Schedule File
          </label>
          {scheduleFileName && <p className="mt-2 text-gray-600">Selected file: {scheduleFileName}</p>}
        </div>
      </main>

      {/* Error Message */}
      {error && <div className="text-red-500 mt-4">{error}</div>}

      <div className="flex justify-center items-center w-full mb-6">
        <button onClick={handleSubmit} className="bg-blue-600 text-white px-6 py-3 rounded shadow-lg hover:bg-blue-700">
          Submit Files
        </button>
      </div>

      {/* Overlay loading */}
      {isLoading && (
        <div className="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50 z-10">
          <div className="text-white text-lg font-semibold">
            <div className="animate-spin h-10 w-10 border-4 border-t-transparent border-white rounded-full mb-4"></div>
            Uploading...
          </div>
        </div>
      )}

      {/* Pesan berhasil */}
      {isSuccess && (
        <div className="absolute inset-0 flex justify-center items-center bg-green-500 bg-opacity-90 z-10">
          <div className="text-white text-lg font-semibold">Upload successful!</div>
        </div>
      )}
    </div>
  );
};

export default Home;
